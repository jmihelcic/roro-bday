<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RORO Bday quest</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
        integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    
    <style>
        .riddle-number-progress {
            color: #cecece;
            font-size: 2em;
        }
    
        #riddle-number {
            font-size: 2.8em;
            color: brown;
        }
    
        #riddle-text {
            font-size: 1.3em;
        }
    
        #riddle-error {
            display: none;
        }
    
        #riddle-error.show-error {
            display: block;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1 class="text-center p-5">RORO BDAY QUEST</h1>
        <div>
            <h1 class="riddle-number-progress text-center"><span id="riddle-number">0</span> / <span
                    id="riddle-number-max">12</span></h1>
            <p id="riddle-text" class="py-5 text-center">text</p>
    
    
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text">Codeword</span>
                </div>
                <input id="riddle-anwser" type="text" class="form-control" placeholder="Enter the riddle codeword!">
            </div>
    
            <button id="riddle-button" class="btn btn-primary col-12" onclick="checkAnwser()">Found it!</button>
    
    
            <p id="riddle-error" class="mt-2 p-2 alert-danger"></p>
        </div>
    </div>
</body>

<script>
    var riddleNumber = document.querySelector('#riddle-number');
    var riddleText = document.querySelector('#riddle-text');
    var riddleAnwser = document.querySelector('#riddle-anwser');
    var riddleButton = document.querySelector('#riddle-button');
    var riddleError = document.querySelector('#riddle-error');
    var currentRiddleIndex = +(localStorage.getItem('roro-index') || 0);

    var riddles = [

        {
            id: 0,
            text: 'Welcome. word is "im ready"',
            codeword: 'im ready'
        },

        {
            id: 1,
            text: 'Once memories filled these walls,<br>now only a beacon of light still calls',
            codeword: 'boaties'
        }

    ];

    function checkAnwser() {
        var value = riddleAnwser.value.toLowerCase().trim();

        if (value == '') {
            riddleError.classList.add('show-error');
            riddleError.innerHTML = 'You need to write something dummy :3';
            return;
        }

        var match = riddles.find(function (riddle) {
            return riddle.codeword === value;
        });

        if (!match) {
            riddleError.classList.add('show-error');
            riddleError.innerHTML = 'Hmmm nope, thats not the codeword for any riddle. Did you write it correctly?';
            return;
        }

        if (currentRiddleIndex !== match.id) {
            riddleError.classList.add('show-error');
            riddleError.innerHTML = 'Oooo found one! But not the correct one. Please put it back. You might need it later :3';
            return;
        }

        currentRiddleIndex++;
        setupRiddle();
    }


    function setupRiddle() {
        localStorage.setItem('roro-index', currentRiddleIndex);

        riddleError.classList.remove('show-error');
        riddleError.innerHTML = '';


        riddleNumber.innerHTML = currentRiddleIndex;
        riddleText.innerHTML = riddles[currentRiddleIndex].text;
        riddleAnwser.value = '';
    }

    setupRiddle();

</script>

</html>